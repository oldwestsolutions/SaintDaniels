<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Enrollment - Saint Daniels Healthcare Rewards</title>
    <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <style>
        /* Variables */
        :root {
            --primary-green: #1a472a;
            --secondary-green: #2a623d;
            --light-green: #5d8b75;
            --primary-tan: #d8c3a5;
            --light-tan: #e8e4d9;
            --gold: #c6a96d;
            --dark-gold: #a08c5b;
        }

        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Garamond', 'Times New Roman', serif;
        }

        body {
            background-color: var(--light-tan);
            color: var(--primary-green);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Form Styles */
        .enrollment-form {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--gold);
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h2 {
            color: var(--primary-green);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-green);
            font-weight: bold;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--primary-tan);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 10px rgba(198, 169, 109, 0.2);
        }

        .signature-section {
            margin-top: 30px;
            padding: 20px;
            background: var(--light-tan);
            border-radius: 8px;
        }

        .submit-btn {
            background: var(--gold);
            color: var(--primary-green);
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background: var(--dark-gold);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Header Styles */
        header {
            background-color: var(--primary-green);
            color: var(--primary-tan);
            padding: 15px 0;
            border-bottom: 5px solid var(--gold);
            margin-bottom: 30px;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: inherit;
        }

        .custom-logo {
            width: 60px;
            height: 60px;
            object-fit: contain;
            margin-right: 15px;
        }

        .logo h1 {
            font-size: 2.2rem;
            margin-left: 15px;
            text-transform: uppercase;
        }

        .back-btn {
            background: var(--primary-tan);
            color: var(--primary-green);
            padding: 8px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: var(--gold);
            transform: translateY(-2px);
        }

        /* Insurance Selection Styles */
        .insurance-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .insurance-option:last-child {
            grid-column: 1 / -1;  /* Make the "No" option span full width */
            margin-top: 10px;     /* Add some space above the "No" option */
            padding-top: 10px;    /* Add padding above the "No" option */
            border-top: 1px solid var(--primary-tan);  /* Add a subtle separator */
        }

        .insurance-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insurance-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        /* Form Header Styles */
        .form-header {
            display: flex;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--gold);
        }

        .form-header .form-logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-right: 20px;
        }

        .form-header .header-text {
            flex: 1;
        }

        .form-header h1 {
            color: var(--primary-green);
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .form-header h2 {
            color: var(--secondary-green);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .form-header p {
            color: var(--secondary-green);
            font-style: italic;
            margin-top: 15px;
        }

        /* Mobile Optimization */
        @media screen and (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }

            .enrollment-form {
                padding: 20px;
            }

            .form-header {
                flex-direction: column;
                text-align: center;
            }

            .form-header .form-logo {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .insurance-options {
                grid-template-columns: 1fr;
            }

            .header-container {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .logo {
                justify-content: center;
            }

            .back-btn {
                width: 100%;
                text-align: center;
                padding: 12px;
            }

            input[type="text"],
            input[type="email"],
            input[type="tel"],
            textarea,
            select {
                font-size: 16px; /* Prevents iOS zoom on focus */
                padding: 15px;
            }

            .submit-btn {
                padding: 18px;
            }
        }

        /* Updated Form Title Styles */
        .enrollment-title {
            background: var(--primary-green);
            color: var(--primary-tan);
            padding: 15px 20px;
            margin: -40px -40px 30px -40px;
            border-radius: 13px 13px 0 0;
            border-bottom: 3px solid var(--gold);
        }

        .enrollment-title h2 {
            font-size: 1.8rem;
            margin: 0;
            border: none !important;
            padding: 0;
        }

        @media screen and (max-width: 768px) {
            .enrollment-title {
                margin: -20px -20px 20px -20px;
                padding: 12px 15px;
            }
        }

        /* Remove duplicate title */
        .form-section:first-of-type h2 {
            display: none;
        }

        /* Form Step Animation Styles */
        .form-step {
            display: none;
            opacity: 0;
            transform: translateX(100px) rotateY(20deg);
            transform-origin: left center;
            transition: all 0.4s ease-in-out;
            perspective: 1000px;
        }

        .form-step.active {
            display: block;
            opacity: 1;
            transform: translateX(0) rotateY(0);
        }

        .form-step.previous {
            transform: translateX(-100px) rotateY(-20deg);
        }

        /* Navigation Button Styles */
        .form-navigation {
            display: flex;
            justify-content: flex-end;  /* Align to right */
            margin-top: 30px;
            gap: 15px;  /* Space between buttons */
        }

        .nav-btn {
            background: var(--gold);
            color: var(--primary-green);
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            background: var(--dark-gold);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-btn.prev {
            background: var(--light-tan);
            margin-right: auto;  /* Push to left if present */
        }

        /* Form Container Animation */
        .enrollment-form {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        /* Hide reCAPTCHA initially */
        .g-recaptcha {
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .address-title {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--primary-tan);
        }

        .address-title .title-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;  /* Space between elements */
        }

        .address-title h3 {
            color: var(--secondary-green);
            font-size: 1.4rem;
            font-weight: normal;
            margin: 0;
        }

        .address-title .star {
            color: var(--gold);
            font-size: 1.2rem;  /* Slightly larger for the star */
            line-height: 1;
            transform: translateY(-1px); /* Slight adjustment for visual centering */
        }

        .address-title .subtitle {
            color: var(--light-green);
            font-size: 0.9rem;
            font-style: italic;
            margin: 0;
        }

        .radio-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 10px 0;
        }

        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .radio-option input[type="radio"],
        .checkbox-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .radio-option label,
        .checkbox-option label {
            margin: 0;
            cursor: pointer;
        }

        .coverage-warning {
            margin-top: 30px;
            padding: 20px;
            background: var(--light-tan);
            border-radius: 8px;
            border-left: 4px solid var(--gold);
        }

        .coverage-warning h4 {
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        .coverage-warning ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .coverage-warning .warning-text {
            margin-top: 15px;
            color: var(--secondary-green);
            font-style: italic;
        }

        .checkbox-options .checkbox-option:only-child {
            opacity: 0.8;
        }

        .option-explanation {
            font-size: 0.9rem;
            color: var(--secondary-green);
            margin-top: 8px;
            font-style: italic;
            padding-left: 30px;
        }

        .deductible-explanations {
            margin-top: 15px;
            padding: 15px;
            background: var(--light-tan);
            border-radius: 8px;
            border-left: 4px solid var(--gold);
        }

        .option-explanation.highlight {
            color: var(--primary-green);
            font-weight: 500;
        }

        .add-dependent-btn {
            background: var(--light-tan);
            color: var(--primary-green);
            border: 1px solid var(--gold);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .add-dependent-btn:hover {
            background: var(--gold);
            color: var(--primary-green);
        }

        .dependent-entry {
            border: 1px solid var(--primary-tan);
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            background: var(--light-tan);
        }

        .remove-dependent {
            color: #ff4444;
            cursor: pointer;
            float: right;
        }

        .citizenship-notice {
            margin-top: 15px;
            padding: 15px;
            background: var(--light-tan);
            border-radius: 8px;
            border-left: 4px solid var(--gold);
        }

        .citizenship-notice p {
            color: var(--secondary-green);
            font-size: 0.9rem;
            font-style: italic;
            margin: 0;
        }

        .notice-content {
            padding: 20px;
            background: var(--light-tan);
            border-radius: 8px;
            margin-top: 20px;
        }

        .notice-points {
            margin: 20px 0;
            padding-left: 20px;
        }

        .notice-points li {
            margin-bottom: 10px;
            color: var(--secondary-green);
        }

        .important-notice {
            background: #fff;
            border-left: 4px solid var(--gold);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .contact-action {
            text-align: center;
            margin-top: 30px;
        }

        .phone-button {
            display: inline-block;
            background: var(--primary-green);
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            text-decoration: none;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .phone-button:hover {
            background: var(--secondary-green);
            transform: translateY(-2px);
        }

        .form-navigation {
            margin-top: 30px;
            text-align: center;
        }

        .nav-btn.prev {
            background: var(--light-tan);
            color: var(--primary-green);
            border: 1px solid var(--gold);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn.prev:hover {
            background: var(--gold);
            color: var(--primary-green);
        }

        .contact-options {
            margin-top: 30px;
            padding: 20px;
            background: white;
            border-radius: 8px;
        }

        .contact-options h4 {
            text-align: center;
            color: var(--primary-green);
            margin-bottom: 20px;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .contact-option {
            text-align: center;
            padding: 20px;
            background: var(--light-tan);
            border-radius: 8px;
            transition: transform 0.3s ease;
        }

        .contact-option:hover {
            transform: translateY(-5px);
        }

        .contact-option i {
            font-size: 24px;
            color: var(--gold);
            margin-bottom: 10px;
        }

        .contact-option h5 {
            color: var(--primary-green);
            margin: 10px 0;
        }

        .contact-option p {
            font-size: 0.9rem;
            color: var(--secondary-green);
            margin-bottom: 15px;
        }

        .action-button {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            width: 100%;
            max-width: 200px;
        }

        .action-button.phone {
            background: var(--primary-green);
            color: white;
        }

        .action-button.email {
            background: var(--gold);
            color: var(--primary-green);
        }

        .action-button.continue {
            background: var(--secondary-green);
            color: white;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .terms-container {
            margin: 20px 0;
            border: 1px solid var(--primary-tan);
            border-radius: 8px;
            overflow: hidden;
        }

        .terms-container h3 {
            background: var(--light-tan);
            color: var(--primary-green);
            padding: 15px;
            margin: 0;
            border-bottom: 1px solid var(--primary-tan);
        }

        .terms-content {
            max-height: 300px;
            overflow-y: auto;
            padding: 20px;
            background: white;
        }

        .terms-content h4 {
            color: var(--secondary-green);
            margin: 20px 0 10px;
        }

        .terms-content h4:first-child {
            margin-top: 0;
        }

        .terms-content p {
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .signature-agreement {
            margin: 20px 0;
            padding: 20px;
            background: var(--light-tan);
            border-radius: 8px;
        }

        .signature-agreement p {
            color: var(--secondary-green);
            font-style: italic;
        }

        /* Scrollbar styling */
        .terms-content::-webkit-scrollbar {
            width: 8px;
        }

        .terms-content::-webkit-scrollbar-track {
            background: var(--light-tan);
        }

        .terms-content::-webkit-scrollbar-thumb {
            background: var(--primary-tan);
            border-radius: 4px;
        }

        .terms-content::-webkit-scrollbar-thumb:hover {
            background: var(--gold);
        }

        .terms-content h5 {
            color: var(--primary-green);
            margin: 15px 0 10px;
            font-size: 0.95rem;
        }

        .terms-content ul {
            margin: 10px 0 10px 20px;
            list-style-type: disc;
        }

        .terms-content li {
            margin-bottom: 5px;
            color: var(--secondary-green);
            font-size: 0.9rem;
        }

        .secure-ssn {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border: 1px solid var(--gold);
        }

        .secure-ssn input {
            font-family: monospace;
            letter-spacing: 2px;
            -webkit-text-security: disc;
            text-security: disc;
        }

        /* For browsers that don't support text-security */
        .secure-ssn input[type="text"] {
            -webkit-text-security: disc;
            -moz-text-security: disc;
            text-security: disc;
        }

        /* Ensure placeholder is visible */
        .secure-ssn input::placeholder {
            -webkit-text-security: none;
            text-security: none;
        }

        .security-notice {
            margin-top: 10px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.9rem;
            color: var(--secondary-green);
        }

        .security-notice i {
            color: var(--gold);
            font-size: 1.2rem;
            margin-top: 3px;
        }

        .format-note {
            font-style: italic;
            margin-top: 5px;
            font-size: 0.85rem;
        }

        .field-note {
            font-size: 0.85rem;
            color: var(--secondary-green);
            margin-top: 5px;
            font-style: italic;
        }

        input[type="tel"],
        input[type="date"] {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--primary-tan);
            border-radius: 4px;
            font-size: 1rem;
        }

        input[type="tel"]:focus,
        input[type="date"]:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 5px rgba(var(--gold-rgb), 0.3);
        }

        .secure-ssn input {
            font-family: monospace;
            letter-spacing: 2px;
            -webkit-text-security: disc;
            text-security: disc;
        }

        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--primary-tan);
            border-radius: 4px;
            font-size: 1rem;
        }

        /* Remove number input arrows */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        input[type="number"] {
            -moz-appearance: textfield;
        }

        .income-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .dollar-sign {
            position: absolute;
            left: 10px;
            color: var(--secondary-green);
        }

        .currency-input {
            padding-left: 25px !important;
        }

        .suggestions-container {
            position: absolute;
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            background: white;
            border: 1px solid var(--primary-tan);
            border-radius: 4px;
            z-index: 1000;
            display: none;
        }

        .suggestion-item {
            padding: 10px;
            cursor: pointer;
        }

        .suggestion-item:hover {
            background: var(--light-tan);
        }

        .error-message {
            display: none;
            color: #dc3545;
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .form-group input:invalid + .error-message {
            display: block;
        }

        .thank-you-content {
            text-align: center;
            padding: 40px 20px;
        }

        .success-checkmark {
            color: var(--primary-green);
            font-size: 64px;
            margin: 20px 0;
        }

        .thank-you-content h2 {
            color: var(--primary-green);
            margin-bottom: 20px;
        }

        .thank-you-content p {
            margin: 10px 0;
            font-size: 1.1em;
        }

        .error-message {
            color: red;
            font-size: 14px;
            margin-top: 5px;
            text-align: center;
        }

        #submit-application {
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        #submit-application:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .g-recaptcha {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .g-recaptcha {
                transform: scale(0.9);
                transform-origin: center;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="index.html" class="back-btn">← Back to Home</a>
        </div>
    </header>

    <div class="container">
        <form action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00DHu00000H9l1E" 
              method="POST" 
              class="enrollment-form"
              id="enrollmentForm">
            
            <input type="hidden" name='captcha_settings' value='{"keyname":"SaintDaniels","fallback":"false","orgId":"00DHu00000H9l1E","ts":""}'>
            <input type="hidden" name="oid" value="00DHu00000H9l1E">
            <input type="hidden" name="retURL" value="https://www.saintdaniels.com/signup">

            <!-- Form Header with Logo -->
            <div class="form-header">
                <img src="saint daniels logo.jpeg" alt="Saint Daniels Logo" class="form-logo">
                <div class="header-text">
                    <h1>Saint Daniels Healthcare</h1>
                    <h2>Enrollment Application</h2>
                    <p>Please complete all required fields marked with an asterisk (*)</p>
                </div>
            </div>

            <!-- Step 1: Basic Information -->
            <div class="form-step active" id="step1">
                <div class="form-section">
                    <div class="form-group">
                        <label for="first_name">First Name *</label>
                        <input 
                            type="text" 
                            id="first_name" 
                            name="first_name" 
                            required
                            minlength="2"
                            pattern="[A-Za-z]{2,}"
                            placeholder="Enter your first name"
                        >
                        <span class="error-message" id="first-name-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="last_name">Last Name *</label>
                        <input 
                            type="text" 
                            id="last_name" 
                            name="last_name" 
                            required
                            minlength="2"
                            pattern="[A-Za-z]{2,}"
                            placeholder="Enter your last name"
                        >
                        <span class="error-message" id="last-name-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            required
                            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                            placeholder="example@email.com"
                        >
                        <span class="error-message" id="email-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone *</label>
                        <input 
                            type="tel" 
                            id="phone" 
                            name="phone" 
                            required
                            maxlength="14"
                        >
                        <span class="error-message" id="phone-error"></span>
                    </div>
                    <div class="form-navigation">
                        <div></div> <!-- Empty div for spacing -->
                        <button type="button" class="nav-btn next" onclick="nextStep(1)">Next</button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Dependents & Tax Info -->
            <div class="form-step" id="step2">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Household Information</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Tell us about your household and tax status</p>
                        </div>
                    </div>

                    <!-- Tax Information -->
                    <div class="form-group">
                        <label>Tax Filing Status for 2024 *</label>
                        <div class="radio-options">
                            <div class="radio-option">
                                <input type="radio" id="single" name="tax_status" value="Single" required>
                                <label for="single">Single</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="married_joint" name="tax_status" value="Married Filing Jointly" required>
                                <label for="married_joint">Married Filing Jointly</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="married_separate" name="tax_status" value="Married Filing Separately" required>
                                <label for="married_separate">Married Filing Separately</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="head_household" name="tax_status" value="Head of Household" required>
                                <label for="head_household">Head of Household</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Will you be claimed as a dependent on someone's taxes? *</label>
                        <div class="radio-options">
                            <div class="radio-option">
                                <input type="radio" id="tax_dependent_yes" name="tax_dependent" value="Yes" required>
                                <label for="tax_dependent_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="tax_dependent_no" name="tax_dependent" value="No" required>
                                <label for="tax_dependent_no">No</label>
                            </div>
                        </div>
                    </div>

                    <!-- Spouse Information -->
                    <div class="form-group">
                        <label>Are you married? *</label>
                        <div class="radio-options">
                            <div class="radio-option">
                                <input type="radio" id="married_yes" name="married" value="Yes" required onchange="toggleSpouseInfo()">
                                <label for="married_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="married_no" name="married" value="No" required onchange="toggleSpouseInfo()">
                                <label for="married_no">No</label>
                            </div>
                        </div>
                    </div>

                    <div id="spouse_info" style="display: none;">
                        <div class="form-group">
                            <label>Is your spouse applying for coverage? *</label>
                            <div class="radio-options">
                                <div class="radio-option">
                                    <input type="radio" id="spouse_applying_yes" name="spouse_applying" value="Yes" onchange="toggleSpouseDetails()">
                                    <label for="spouse_applying_yes">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="spouse_applying_no" name="spouse_applying" value="No" onchange="toggleSpouseDetails()">
                                    <label for="spouse_applying_no">No</label>
                                </div>
                            </div>
                        </div>

                        <div id="spouse_details" style="display: none;">
                            <div class="form-group">
                                <label for="spouse_name">Spouse's Full Name *</label>
                                <input type="text" id="spouse_name" name="spouse_name">
                            </div>
                            <div class="form-group">
                                <label for="spouse_dob">Spouse's Date of Birth *</label>
                                <input type="date" id="spouse_dob" name="spouse_dob">
                            </div>
                        </div>
                    </div>

                    <!-- Dependents Information -->
                    <div class="form-group">
                        <label>Are you adding any dependents to this application? *</label>
                        <div class="radio-options">
                            <div class="radio-option">
                                <input type="radio" id="dependents_yes" name="has_dependents" value="Yes" required onchange="toggleDependentInfo()">
                                <label for="dependents_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="dependents_no" name="has_dependents" value="No" required onchange="toggleDependentInfo()">
                                <label for="dependents_no">No</label>
                            </div>
                        </div>
                    </div>

                    <div id="dependent_info" style="display: none;">
                        <div id="dependents_container">
                            <!-- Dependent template will be added here -->
                        </div>
                        <button type="button" class="add-dependent-btn" onclick="addDependent()">+ Add Another Dependent</button>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="nav-btn prev" onclick="prevStep(2)">Previous</button>
                        <button type="button" class="nav-btn next" onclick="nextStep(2)">Next</button>
                    </div>
                </div>
            </div>

            <!-- Step 3: Residential Address -->
            <div class="form-step" id="step3">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Residential Address</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Please provide your current living address</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="street_address">Street Address *</label>
                        <input 
                            type="text" 
                            id="street_address" 
                            name="street_address" 
                            placeholder="Start typing your address..."
                            required
                        >
                        <div id="address_suggestions" class="suggestions-container"></div>
                    </div>
                    <div class="form-group">
                        <label for="city">City *</label>
                        <input 
                            type="text" 
                            id="city" 
                            name="city" 
                            required
                        >
                    </div>
                    <div class="form-group">
                        <label for="state">State *</label>
                        <input 
                            type="text" 
                            id="state" 
                            name="state" 
                            required
                        >
                    </div>
                    <div class="form-group">
                        <label for="zip">ZIP Code *</label>
                        <input 
                            type="text" 
                            id="zip" 
                            name="zip" 
                            required
                            pattern="\d{5}"
                            maxlength="5"
                            placeholder="5-digit ZIP code"
                        >
                    </div>
                    <div class="form-navigation">
                        <button type="button" class="nav-btn prev" onclick="prevStep(3)">Previous</button>
                        <button type="button" class="nav-btn next" onclick="nextStep(3)">Next</button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Mailing Address -->
            <div class="form-step" id="step4">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Mailing Address</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Where would you like to receive mail?</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="same_as_residential" onchange="toggleMailingAddress()">
                            <label for="same_as_residential">Same as Residential Address</label>
                        </div>
                    </div>

                    <div id="mailing_address_fields">
                        <div class="form-group">
                            <label for="mailing_street">Street Address *</label>
                            <textarea id="mailing_street" name="mailing_street" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="mailing_city">City *</label>
                            <input id="mailing_city" name="mailing_city" type="text" required>
                        </div>
                        <div class="form-group">
                            <label for="mailing_state">State *</label>
                            <input id="mailing_state" name="mailing_state" type="text" required>
                        </div>
                        <div class="form-group">
                            <label for="mailing_zip">ZIP Code *</label>
                            <input id="mailing_zip" name="mailing_zip" type="text" required>
                        </div>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="nav-btn prev" onclick="prevStep(4)">Previous</button>
                        <button type="button" class="nav-btn next" onclick="nextStep(4)">Next</button>
                    </div>
                </div>
            </div>

            <!-- Step 5: Citizenship Information -->
            <div class="form-step" id="step5">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Birth & Citizenship</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Tell us about your place of birth and citizenship status</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="dob">Date of Birth *</label>
                        <input 
                            type="date" 
                            id="dob" 
                            name="dob"
                            max="2006-12-31" 
                            required
                        >
                        <p class="field-note">You must be at least 18 years old to enroll</p>
                    </div>

                    <div class="form-group">
                        <label for="birth_state">State of Birth *</label>
                        <input type="text" id="birth_state" name="birth_state" required>
                    </div>

                    <div class="form-group">
                        <label for="birth_country">Country of Birth *</label>
                        <input type="text" id="birth_country" name="birth_country" required>
                    </div>

                    <div class="form-group">
                        <label>Are you a U.S. Citizen? *</label>
                        <div class="radio-options">
                            <div class="radio-option">
                                <input type="radio" id="citizen_yes" name="us_citizen" value="Yes" required>
                                <label for="citizen_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="citizen_no" name="us_citizen" value="No" required>
                                <label for="citizen_no">No</label>
                            </div>
                        </div>
                        <div class="citizenship-notice">
                            <p>Note: Non-U.S. citizenship does not disqualify you from healthcare benefits. Additional documentation may be required, and our team will contact you to assist.</p>
                        </div>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="nav-btn prev" onclick="prevStep(5)">Previous</button>
                        <button type="button" class="nav-btn next" onclick="nextStep(5)">Next</button>
                    </div>
                </div>
            </div>

            <!-- Step 6: Insurance -->
            <div class="form-step" id="step6">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Insurance Carriers</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Select your preferred insurance options</p>
                        </div>
                    </div>

                    <!-- Insurance Carrier Selection -->
                    <div class="form-group">
                        <label>Select Your Insurance Carrier *</label>
                        <div class="radio-options">
                            <div class="radio-option">
                                <input type="radio" id="united_healthcare" name="insurance_carrier" value="United Healthcare" required>
                                <label for="united_healthcare">United Healthcare</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="ambetter" name="insurance_carrier" value="Ambetter" required>
                                <label for="ambetter">Ambetter</label>
                            </div>
                        </div>
                    </div>

                    <!-- Premium Selection -->
                    <div class="form-group">
                        <label>Premium Option</label>
                        <div class="checkbox-options">
                            <div class="checkbox-option">
                                <input type="checkbox" id="zero_premium" name="premium_option" value="$0 Premium" checked disabled>
                                <label for="zero_premium">$0 Premium Plan</label>
                            </div>
                        </div>
                        <p class="option-explanation">With a $0 premium plan, you pay nothing monthly for your health insurance coverage.</p>
                    </div>

                    <!-- Deductible Selection -->
                    <div class="form-group">
                        <label>Select Your Preferred Deductible *</label>
                        <div class="radio-options">
                            <div class="radio-option">
                                <input type="radio" id="zero_deductible" name="deductible" value="$0 Deductible" required>
                                <label for="zero_deductible">$0.00 Deductible</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="lower_deductible" name="deductible" value="Lower Deductible" required>
                                <label for="lower_deductible">Lower Deductible</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="higher_deductible" name="deductible" value="Higher Deductible" required>
                                <label for="higher_deductible">Higher Deductible</label>
                            </div>
                        </div>
                        <div class="deductible-explanations">
                            <p class="option-explanation">A $0 deductible means your insurance begins paying for your coverage immediately.</p>
                            <p class="option-explanation highlight">Higher deductible plans still cost $0 today - you only pay when you use the insurance, plus you'll receive enhanced benefits through Saint Daniels Healthcare.</p>
                        </div>
                    </div>

                    <!-- Current Coverage Warning -->
                    <div class="coverage-warning">
                        <h4>Current Coverage Notice</h4>
                        <p>Do you have any of these insurance coverages?</p>
                        <div class="insurance-options">
                            <div class="insurance-option">
                                <input type="checkbox" id="medicare" name="current_coverage" value="Medicare">
                                <label for="medicare">Medicare</label>
                            </div>
                            <div class="insurance-option">
                                <input type="checkbox" id="medicaid" name="current_coverage" value="Medicaid">
                                <label for="medicaid">Medicaid</label>
                            </div>
                            <div class="insurance-option">
                                <input type="checkbox" id="tricare" name="current_coverage" value="Tricare">
                                <label for="tricare">Tricare</label>
                            </div>
                            <div class="insurance-option">
                                <input type="checkbox" id="employer" name="current_coverage" value="Employer Coverage">
                                <label for="employer">Employer Coverage</label>
                            </div>
                            <div class="insurance-option">
                                <input type="checkbox" id="no_coverage" name="current_coverage" value="No Current Coverage" required>
                                <label for="no_coverage">No, I don't have any of these coverages</label>
                            </div>
                        </div>
                        <p class="warning-text">If you selected any coverage above (except "No"), you would not be able to qualify under most circumstances unless you were planning on leaving your current level of coverage. For assistance, please contact us directly.</p>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="nav-btn prev" onclick="prevStep(6)">Previous</button>
                        <button type="button" class="nav-btn next" onclick="nextStep(6)">Next</button>
                    </div>
                </div>
            </div>

            <!-- Step 7: Employment -->
            <div class="form-step" id="step7">
                <div class="form-section">
                    <h2>Employment Information</h2>
                    <div class="form-group">
                        <label for="occupation">Occupation *</label>
                        <input id="occupation" name="occupation" type="text" required>
                    </div>
                    <div class="form-group">
                        <label for="income">Expected Annual Income for Current Tax Year *</label>
                        <div class="income-input-wrapper">
                            <span class="dollar-sign">$</span>
                            <input 
                                type="text" 
                                id="income" 
                                name="income"
                                required
                                class="currency-input"
                            >
                        </div>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="nav-btn prev" onclick="prevStep(7)">Previous</button>
                    <button type="button" class="nav-btn next" onclick="nextStep(7)">Next</button>
                </div>
            </div>

            <!-- Step 8: Signature -->
            <div class="form-step" id="step8">
                <div class="signature-section">
                    <h2>Electronic Signature</h2>
                    
                    <!-- Terms and Conditions Container -->
                    <div class="terms-container">
                        <h3>Terms & Conditions, Privacy Notice, and Legal Disclaimer</h3>
                        <div class="terms-content">
                            <h4>1. Introduction</h4>
                            <p>Welcome to SaintDaniels.com (the "Website"). By accessing, using, or submitting any enrollment application through this Website, you acknowledge and agree to the following terms and conditions, legal disclaimers, and privacy and security notices. Your continued use of this Website constitutes your binding acceptance of these terms.</p>
                            
                            <p>If you do not agree with these terms, DO NOT use this Website or submit an enrollment application.</p>

                            <h4>2. Legal Disclaimer</h4>
                            <h5>2.1. No Guarantee of Enrollment</h5>
                            <p>Submission of an enrollment application through SaintDaniels.com does not guarantee approval or acceptance into any health insurance plan. All applications are subject to verification, underwriting, and approval by the applicable health insurance provider or government agency.</p>

                            <h5>2.2. Compliance with Laws</h5>
                            <p>SaintDaniels.com operates in compliance with all applicable federal, state, and local laws regarding health insurance enrollment. Users must ensure that all information provided is accurate, truthful, and legally compliant.</p>

                            <h5>2.3. Misuse and Abuse Policy</h5>
                            <p>SaintDaniels.com strictly prohibits fraudulent activities, misrepresentation, or any misuse of the enrollment platform. If SaintDaniels.com becomes aware of any attempt to abuse, manipulate, or fraudulently use this system, the offending user will be permanently banned from accessing the system.</p>
                            
                            <p>Furthermore, SaintDaniels.com reserves the right to report fraudulent activity to law enforcement, regulatory authorities, and any affected health insurance providers.</p>

                            <h5>2.4. Legal Oversight</h5>
                            <p>All interactions with this Website and its services are governed by the law office retained by the proprietor of SaintDaniels.com. In the event of any disputes, misuse, or violations of these terms, SaintDaniels.com reserves the right to take appropriate legal action, including litigation, arbitration, or referral to regulatory authorities.</p>

                            <h4>3. Privacy Notice & Data Security</h4>
                            <h5>3.1. Collection of Information</h5>
                            <p>By using this Website, you acknowledge that SaintDaniels.com may collect, process, and store personal and sensitive information necessary for health insurance enrollment. This includes, but is not limited to:</p>
                            <ul>
                                <li>Full Name</li>
                                <li>Date of Birth</li>
                                <li>Social Security Number</li>
                                <li>Contact Information</li>
                                <li>Health & Financial Information</li>
                            </ul>
                            <p>All data collected is handled in strict compliance with the Health Insurance Portability and Accountability Act (HIPAA) and other relevant privacy laws.</p>

                            <h5>3.2. Data Protection & Security</h5>
                            <p>SaintDaniels.com implements industry-standard security measures to protect user data. However, no system is completely secure, and SaintDaniels.com cannot guarantee absolute data security. Users are responsible for maintaining the confidentiality of their login credentials and must notify us immediately of any unauthorized access.</p>

                            <h5>3.3. Third-Party Sharing</h5>
                            <p>SaintDaniels.com may share user information with insurance carriers, government agencies, and third-party service providers solely for the purpose of processing applications. We do not sell or distribute user data for commercial purposes.</p>

                            <h5>3.4. User Consent</h5>
                            <p>By submitting an application, you consent to the collection, processing, and sharing of your data as outlined in this Privacy Notice.</p>

                            <h4>4. Terms & Conditions of Use</h4>
                            <h5>4.1. Eligibility</h5>
                            <p>To use this Website, you must:</p>
                            <ul>
                                <li>Be at least 18 years of age or the legal age of consent in your jurisdiction.</li>
                                <li>Provide accurate, complete, and truthful information in your enrollment application.</li>
                                <li>Agree to abide by these Terms & Conditions.</li>
                            </ul>

                            <h5>4.2. Prohibited Activities</h5>
                            <p>Users of SaintDaniels.com shall not:</p>
                            <ul>
                                <li>Provide false, misleading, or fraudulent information.</li>
                                <li>Attempt to hack, disrupt, or manipulate the Website.</li>
                                <li>Share login credentials or unauthorized access with third parties.</li>
                                <li>Engage in identity theft or unauthorized use of another person's information.</li>
                            </ul>
                            <p>Any violations will result in permanent banning from the platform and potential legal action.</p>

                            <h5>4.3. System Availability & Downtime</h5>
                            <p>SaintDaniels.com does not guarantee uninterrupted access to its services. Scheduled maintenance, technical issues, or external factors may cause temporary disruptions. Users acknowledge that SaintDaniels.com is not liable for any losses due to service unavailability.</p>

                            <h4>5. Legal Jurisdiction & Dispute Resolution</h4>
                            <h5>5.1. Governing Law</h5>
                            <p>These Terms & Conditions shall be governed by and interpreted in accordance with the laws of the United States and the applicable state laws where SaintDaniels.com is registered.</p>

                            <h5>5.2. Dispute Resolution</h5>
                            <p>In the event of a dispute, users agree to resolve issues through binding arbitration or mediation before pursuing legal action. Litigation, if necessary, shall be pursued in the appropriate jurisdiction as determined by SaintDaniels.com's legal counsel.</p>

                            <h4>6. Modifications & Updates</h4>
                            <p>SaintDaniels.com reserves the right to update, modify, or amend these Terms & Conditions at any time. Continued use of the Website constitutes acceptance of any revisions.</p>
                            
                            <p>Users are encouraged to review this document periodically to stay informed of any changes.</p>

                            <h4>7. Contact Information</h4>
                            <p>For questions or concerns regarding these Terms & Conditions, Privacy Policy, or Legal Disclaimer, please contact:</p>
                            <p>SaintDaniels.com Legal Compliance Team<br>
                            📧 Email: support@saintdaniels.com</p>
                        </div>
                    </div>

                    <div class="signature-agreement">
                        <p>By typing your full name below, you confirm that you have read, understood, and agreed to these Terms & Conditions, Privacy Notice, and Legal Disclaimer. This constitutes your legal electronic signature.</p>
                        
                        <div class="form-group">
                            <label for="signature">Full Name (must match exactly as entered) *</label>
                            <input 
                                id="signature" 
                                name="signature" 
                                type="text" 
                                required
                            >
                            <span class="error-message" id="signature-error"></span>
                        </div>

                        <!-- Moved SSN Field Here -->
                        <div class="form-group secure-ssn">
                            <label for="ssn">Social Security Number (Required for Enrollment) *</label>
                            <input 
                                type="text" 
                                id="ssn" 
                                name="ssn" 
                                maxlength="9"
                                autocomplete="off"
                                required
                            >
                            <span class="error-message" id="ssn-error"></span>
                            <div class="security-notice">
                                <i class="fas fa-lock"></i>
                                <p>Your SSN is required to process your enrollment application. This information is transmitted over a secure, encrypted connection and protected in accordance with HIPAA guidelines.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- reCAPTCHA -->
                    <div class="form-group">
                        <div id="recaptcha-error" class="error-message" style="display: none;"></div>
                        <div class="g-recaptcha" 
                            data-sitekey="YOUR_SITE_KEY"
                            data-callback="onRecaptchaComplete"
                            data-expired-callback="onRecaptchaExpired"
                            data-error-callback="onRecaptchaError"
                            data-size="normal">
                        </div>
                    </div>
                    
                    <div class="form-navigation">
                        <button type="button" class="nav-btn prev" onclick="prevStep(8)">Previous</button>
                        <button type="submit" class="submit-btn">Submit Enrollment</button>
                    </div>
                </div>
            </div>

            <!-- Medicaid Coverage Notice -->
            <div class="form-step" id="medicaid_notice">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Medicaid Coverage Notice</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Important Information About Your Coverage</p>
                        </div>
                    </div>
                    
                    <div class="notice-content">
                        <div class="important-notice">
                            <p>Please understand that by proceeding, you are choosing to either:</p>
                            <ul>
                                <li>Keep your Medicaid with very limited benefits, or</li>
                                <li>Reject/drop your current Medicaid coverage</li>
                            </ul>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="nav-btn prev" onclick="returnToInsurancePage()">Go Back</button>
                            <button type="button" class="nav-btn next" onclick="proceedToOccupation()">I Understand, Continue</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-step" id="employer_notice">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Employer Coverage Notice</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Important Information About Your Coverage</p>
                        </div>
                    </div>
                    
                    <div class="notice-content">
                        <div class="important-notice">
                            <p>Please note that in most instances, having employer coverage means you do not qualify for this program. However, under certain conditions, you may still be eligible to proceed.</p>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="nav-btn prev" onclick="returnToInsurancePage()">Go Back</button>
                            <button type="button" class="nav-btn next" onclick="proceedToOccupation()">I Understand, Continue</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-step" id="medicare_notice">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Medicare Coverage Notice</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Important Information About Your Coverage</p>
                        </div>
                    </div>
                    
                    <div class="notice-content">
                        <p>You are not changing your health insurance carrier. You are changing the agency that manages your health insurance coverage to receive enhanced benefits through the Saint Daniel's platform.</p>
                        
                        <ul class="notice-points">
                            <li>Centuries Mutual will manage your health insurance plan and communicate directly with your carrier</li>
                            <li>Saint Daniel's is a subsidiary of Centuries Mutual</li>
                            <li>You will have access to all benefits from both Centuries Mutual and Saint Daniel's</li>
                        </ul>

                        <div class="important-notice">
                            <p><strong>Important:</strong> Per CMS guidelines, all Medicare enrollments must be completed over the phone with a licensed agent.</p>
                        </div>

                        <div class="contact-options">
                            <h4>Choose how you'd like to proceed:</h4>
                            
                            <div class="contact-grid">
                                <div class="contact-option">
                                    <i class="fas fa-phone"></i>
                                    <h5>Call Now</h5>
                                    <p>Speak with an agent immediately</p>
                                    <a href="tel:1234567890" class="action-button phone">Call Now</a>
                                </div>
                                
                                <div class="contact-option">
                                    <i class="fas fa-envelope"></i>
                                    <h5>Email Us</h5>
                                    <p>Get information via email</p>
                                    <a href="mailto:contact@example.com" class="action-button email">Send Email</a>
                                </div>
                                
                                <div class="contact-option">
                                    <i class="fas fa-file-alt"></i>
                                    <h5>Continue Application</h5>
                                    <p>Proceed with online enrollment</p>
                                    <button onclick="proceedToOccupation()" class="action-button continue">Continue Online</button>
                                </div>
                            </div>
                        </div>

                        <div class="form-navigation">
                            <button type="button" class="nav-btn prev" onclick="returnToInsurancePage()">Return to Insurance Options</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-step" id="tricare_notice">
                <div class="form-section">
                    <div class="address-title">
                        <div class="title-row">
                            <h3>Tricare Coverage Notice</h3>
                            <span class="star">✦</span>
                            <p class="subtitle">Important Information About Your Coverage</p>
                        </div>
                    </div>
                    
                    <div class="notice-content">
                        <div class="important-notice">
                            <p>We apologize, but if you currently have Tricare coverage, we are unable to offer you a health insurance plan at this time.</p>
                            <p>Thank you for your interest in our services. If your coverage status changes in the future, please don't hesitate to contact us.</p>
                        </div>
                        
                        <div class="contact-action">
                            <p>For any questions about your options:</p>
                            <a href="tel:1234567890" class="phone-button">Contact Us</a>
                        </div>

                        <div class="form-navigation">
                            <button type="button" class="nav-btn prev" onclick="returnToInsurancePage()">Return to Insurance Options</button>
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>

    <!-- Thank You Page -->
    <div class="form-step" id="thank_you_page" style="display: none;">
        <div class="form-section">
            <div class="thank-you-content">
                <h2>Thank You for Enrolling!</h2>
                <div class="success-checkmark">
                    <i class="fas fa-check-circle"></i>
                </div>
                <p>Your enrollment application has been successfully submitted.</p>
                <p>A confirmation email will be sent to your registered email address shortly.</p>
                <p>If you have any questions, please contact us at support@saintdaniels.com</p>
            </div>
        </div>
    </div>

    <script>
        // Set current date
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString();

        // Timestamp for captcha
        function timestamp() {
            var response = document.getElementById("g-recaptcha-response");
            if (response == null || response.value.trim() == "") {
                var elems = JSON.parse(document.getElementsByName("captcha_settings")[0].value);
                elems["ts"] = JSON.stringify(new Date().getTime());
                document.getElementsByName("captcha_settings")[0].value = JSON.stringify(elems);
            }
        }
        setInterval(timestamp, 500);

        // Add this function after your existing JavaScript code
        function convertFormDataToCSV(formData) {
            // Define CSV headers based on your form fields
            const headers = [
                'First Name',
                'Last Name',
                'Email',
                'Phone',
                'Date of Birth',
                'SSN',
                'Street Address',
                'City',
                'State',
                'ZIP',
                'Mailing Address',
                'Mailing City',
                'Mailing State',
                'Mailing ZIP',
                'Tax Status',
                'Tax Dependent',
                'Married',
                'Spouse Name',
                'Spouse DOB',
                'Dependents',
                'Birth State',
                'Birth Country',
                'US Citizen',
                'Occupation',
                'Annual Income',
                'Insurance Carrier',
                'Premium Option',
                'Deductible',
                'Current Coverage',
                'Signature',
                'Submission Date'
            ];

            // Create array for the values
            const values = [
                formData.get('first_name'),
                formData.get('last_name'),
                formData.get('email'),
                formData.get('phone'),
                formData.get('dob'),
                formData.get('ssn'),
                formData.get('street_address'),
                formData.get('city'),
                formData.get('state'),
                formData.get('zip'),
                formData.get('mailing_street'),
                formData.get('mailing_city'),
                formData.get('mailing_state'),
                formData.get('mailing_zip'),
                formData.get('tax_status'),
                formData.get('tax_dependent'),
                formData.get('married'),
                formData.get('spouse_name'),
                formData.get('spouse_dob'),
                Array.from(formData.getAll('dependent_name[]')).join('; '),
                formData.get('birth_state'),
                formData.get('birth_country'),
                formData.get('us_citizen'),
                formData.get('occupation'),
                formData.get('income'),
                formData.get('insurance_carrier'),
                formData.get('premium_option'),
                formData.get('deductible'),
                Array.from(formData.getAll('current_coverage')).join('; '),
                formData.get('signature'),
                new Date().toISOString()
            ];

            // Escape any commas in the values and wrap in quotes
            const escapedValues = values.map(value => {
                if (value === null || value === undefined) return '""';
                return `"${String(value).replace(/"/g, '""')}"`;
            });

            // Create CSV content
            const csvContent = [
                headers.join(','),
                escapedValues.join(',')
            ].join('\n');

            return csvContent;
        }

        // Update the form submission handler with debug logging
        document.getElementById('enrollmentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            console.log('Form submission started');
            
            // Show loading state
            const submitButton = document.getElementById('submit-application');
            const originalButtonText = submitButton.textContent;
            submitButton.textContent = 'Submitting...';
            submitButton.disabled = true;

            try {
                // Validate reCAPTCHA
                const recaptchaResponse = grecaptcha.getResponse();
                console.log('reCAPTCHA response:', recaptchaResponse ? 'valid' : 'invalid');
                
                if (!recaptchaResponse) {
                    throw new Error('Please complete the reCAPTCHA');
                }

                // Get form data and create CSV
                const formData = new FormData(this);
                console.log('Form data collected');
                
                // Log form data (excluding sensitive info)
                console.log('Form fields:', Array.from(formData.keys()));
                
                const csvContent = convertFormDataToCSV(formData);
                console.log('CSV content created');
                
                // Create filename
                const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                const filename = `enrollment_${formData.get('first_name')}_${formData.get('last_name')}_${timestamp}.csv`;
                console.log('Attempting to upload:', filename);

                // Upload to Dropbox
                const response = await fetch('/api/upload-to-dropbox', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        filename: filename,
                        content: csvContent
                    })
                });

                console.log('Server response status:', response.status);
                
                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('Server error details:', errorData);
                    throw new Error(`Upload failed: ${errorData.error || 'Unknown error'}`);
                }

                const result = await response.json();
                console.log('Upload successful:', result);

                // Show success message before redirect
                alert('Enrollment submitted successfully! Redirecting to signup page...');
                
                // Redirect to signup page
                window.location.href = '/signup.html';

            } catch (error) {
                console.error('Submission error:', error);
                alert(error.message || 'There was an error submitting your enrollment. Please try again.');
                
                // Reset button state
                submitButton.textContent = originalButtonText;
                submitButton.disabled = false;
                
                // Reset reCAPTCHA
                grecaptcha.reset();
            }
        });

        function nextStep(currentStep) {
            if (currentStep === 1) {
                if (!validatePersonalInfo()) {
                    return; // Stop if validation fails
                }
            }
            
            let nextStepNumber;
            
            switch(currentStep) {
                case 1: // Personal Info
                    nextStepNumber = 2; // Household Info
                    break;
                case 2: // Household Info
                    nextStepNumber = 3; // Address
                    break;
                case 3: // Address
                    nextStepNumber = 4; // Birth & Citizenship
                    break;
                case 4: // Birth & Citizenship
                    nextStepNumber = 5; // Occupation
                    break;
                case 5: // Occupation
                    nextStepNumber = 6; // Insurance Carriers
                    break;
                case 6: // Insurance Carriers
                    if (!handleCoverageSelection()) {
                        return;
                    }
                    nextStepNumber = 7; // Terms & Signature
                    break;
                case 7: // Terms & Signature
                    nextStepNumber = 8; // Final Step
                    break;
                default:
                    return;
            }

            showStep(`step${nextStepNumber}`);
        }

        function prevStep(currentStep) {
            let prevStepNumber;
            
            switch(currentStep) {
                case 2: // Household Info
                    prevStepNumber = 1; // Personal Info
                    break;
                case 3: // Address
                    prevStepNumber = 2; // Household Info
                    break;
                case 4: // Birth & Citizenship
                    prevStepNumber = 3; // Address
                    break;
                case 5: // Occupation
                    prevStepNumber = 4; // Birth & Citizenship
                    break;
                case 6: // Insurance Carriers
                    prevStepNumber = 5; // Occupation
                    break;
                case 7: // Terms & Signature
                    prevStepNumber = 6; // Insurance Carriers
                    break;
                case 8: // Final Step
                    prevStepNumber = 7; // Terms & Signature
                    break;
                default:
                    return;
            }

            showStep(`step${prevStepNumber}`);
        }

        // Add animation class when document loads
        document.addEventListener('DOMContentLoaded', function() {
            const firstStep = document.getElementById('step1');
            setTimeout(() => {
                firstStep.classList.add('active');
            }, 100);
        });

        function toggleMailingAddress() {
            const checkbox = document.getElementById('same_as_residential');
            const mailingFields = document.getElementById('mailing_address_fields');
            const inputs = mailingFields.querySelectorAll('input, textarea');
            
            if (checkbox.checked) {
                mailingFields.style.display = 'none';
                // Copy residential address values
                document.getElementById('mailing_street').value = document.getElementById('street_address').value;
                document.getElementById('mailing_city').value = document.getElementById('city').value;
                document.getElementById('mailing_state').value = document.getElementById('state').value;
                document.getElementById('mailing_zip').value = document.getElementById('zip').value;
                
                // Remove required attribute
                inputs.forEach(input => input.removeAttribute('required'));
            } else {
                mailingFields.style.display = 'block';
                // Add required attribute back
                inputs.forEach(input => input.setAttribute('required', ''));
            }
        }

        // Add this to your existing JavaScript
        document.querySelectorAll('input[name="current_coverage"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.id === 'no_coverage' && this.checked) {
                    // Uncheck all other options if "No" is selected
                    document.querySelectorAll('input[name="current_coverage"]').forEach(cb => {
                        if (cb.id !== 'no_coverage') cb.checked = false;
                    });
                } else if (this.checked) {
                    // Uncheck "No" option if any other option is selected
                    document.getElementById('no_coverage').checked = false;
                }
            });
        });

        function toggleSpouseInfo() {
            const spouseInfo = document.getElementById('spouse_info');
            spouseInfo.style.display = document.getElementById('married_yes').checked ? 'block' : 'none';
            if (!document.getElementById('married_yes').checked) {
                document.getElementById('spouse_details').style.display = 'none';
            }
        }

        function toggleSpouseDetails() {
            const spouseDetails = document.getElementById('spouse_details');
            spouseDetails.style.display = document.getElementById('spouse_applying_yes').checked ? 'block' : 'none';
        }

        function toggleDependentInfo() {
            const dependentInfo = document.getElementById('dependent_info');
            dependentInfo.style.display = document.getElementById('dependents_yes').checked ? 'block' : 'none';
            if (document.getElementById('dependents_yes').checked && !document.querySelector('.dependent-entry')) {
                addDependent();
            }
        }

        function addDependent() {
            const container = document.getElementById('dependents_container');
            const dependentCount = container.children.length + 1;
            
            const dependentDiv = document.createElement('div');
            dependentDiv.className = 'dependent-entry';
            dependentDiv.innerHTML = `
                <span class="remove-dependent" onclick="this.parentElement.remove()">✕</span>
                <h4>Dependent ${dependentCount}</h4>
                <div class="form-group">
                    <label for="dependent_name_${dependentCount}">Full Name *</label>
                    <input type="text" id="dependent_name_${dependentCount}" name="dependent_name[]" required>
                </div>
                <div class="form-group">
                    <label for="dependent_dob_${dependentCount}">Date of Birth *</label>
                    <input type="date" id="dependent_dob_${dependentCount}" name="dependent_dob[]" required>
                </div>
            `;
            
            container.appendChild(dependentDiv);
        }

        function handleCoverageSelection() {
            const medicare = document.getElementById('medicare');
            const medicaid = document.getElementById('medicaid');
            const tricare = document.getElementById('tricare');
            const employer = document.getElementById('employer');
            
            if (tricare.checked) {
                // Show Tricare notice and prevent proceeding
                showStep('tricare_notice');
                return false;
            }
            
            if (medicare.checked) {
                // Show Medicare notice
                showStep('medicare_notice');
                return false;
            }
            
            if (medicaid.checked) {
                // Show Medicaid notice
                showStep('medicaid_notice');
                return false;
            }
            
            if (employer.checked) {
                // Show Employer notice but allow continuation
                showStep('employer_notice');
                return false;
            }
            
            // If no coverage is selected or "No" is selected
            return true;
        }

        function showStep(stepId) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show requested step
            document.getElementById(stepId).classList.add('active');
        }

        function returnToInsurancePage() {
            // Hide all notice pages
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show the insurance carriers page
            document.getElementById('step6').classList.add('active');
        }

        function proceedToOccupation() {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show the occupation page (step5)
            document.getElementById('step5').classList.add('active');
        }

        // SSN input - only allow numbers
        document.getElementById('ssn').addEventListener('input', function(e) {
            this.value = this.value.replace(/\D/g, '').slice(0, 9);
            const errorElement = document.getElementById('ssn-error');
            
            if (this.value.length !== 9) {
                errorElement.textContent = 'Please enter a valid 9-digit Social Security Number';
                errorElement.style.display = 'block';
                this.setCustomValidity('SSN must be 9 digits');
            } else {
                errorElement.style.display = 'none';
                this.setCustomValidity('');
            }
        });

        // Income formatting with commas
        document.getElementById('income').addEventListener('input', function(e) {
            // Remove any non-digits/decimal
            let value = this.value.replace(/[^\d.]/g, '');
            
            // Ensure only one decimal point
            const parts = value.split('.');
            if (parts.length > 2) value = parts[0] + '.' + parts.slice(1).join('');
            
            // Format with commas and two decimal places
            if (value) {
                const num = parseFloat(value);
                if (!isNaN(num)) {
                    this.value = num.toLocaleString('en-US', {
                        minimumFractionDigits: 2,
                        maximumFractionDigits: 2
                    });
                }
            }
        });

        // Phone number formatting
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            let newValue = '';
            
            if (value.length > 0) {
                newValue = '(' + value.substring(0, 3);
                if (value.length > 3) {
                    newValue += ') ' + value.substring(3, 6);
                }
                if (value.length > 6) {
                    newValue += '-' + value.substring(6, 10);
                }
            }
            
            e.target.value = newValue;
        });

        // Date of birth validation
        document.getElementById('dob').addEventListener('change', function(e) {
            const today = new Date();
            const birthDate = new Date(e.target.value);
            const age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (age < 18 || (age === 18 && monthDiff < 0)) {
                alert('You must be at least 18 years old to enroll.');
                e.target.value = '';
            }
        });

        // Address verification using Google Places API
        function initAutocomplete() {
            const autocomplete = new google.maps.places.Autocomplete(
                document.getElementById('street_address'),
                {types: ['address'], componentRestrictions: {country: 'US'}}
            );

            autocomplete.addListener('place_changed', function() {
                const place = autocomplete.getPlace();
                let address = {};
                
                for (const component of place.address_components) {
                    const type = component.types[0];
                    if (type === 'street_number') address.street_number = component.long_name;
                    if (type === 'route') address.street = component.long_name;
                    if (type === 'locality') address.city = component.long_name;
                    if (type === 'administrative_area_level_1') address.state = component.short_name;
                    if (type === 'postal_code') address.zip = component.long_name;
                }

                document.getElementById('city').value = address.city || '';
                document.getElementById('state').value = address.state || '';
                document.getElementById('zip').value = address.zip || '';
            });
        }

        // Email validation
        document.getElementById('email').addEventListener('input', function(e) {
            const errorElement = document.getElementById('email-error');
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            if (!emailRegex.test(this.value)) {
                errorElement.textContent = 'Please enter a valid email address';
                errorElement.style.display = 'block';
            } else {
                errorElement.textContent = '';
                errorElement.style.display = 'none';
            }
        });

        // Name validation
        ['first_name', 'last_name'].forEach(field => {
            document.getElementById(field).addEventListener('input', function(e) {
                const errorElement = document.getElementById(`${field.replace('_', '-')}-error`);
                
                if (this.value.length < 2) {
                    errorElement.textContent = 'Name must be at least 2 characters long';
                    errorElement.style.display = 'block';
                } else if (!/^[A-Za-z]{2,}$/.test(this.value)) {
                    errorElement.textContent = 'Please enter a valid name (letters only)';
                    errorElement.style.display = 'block';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                }
            });
        });

        function validatePersonalInfo() {
            let isValid = true;
            const emailInput = document.getElementById('email');
            const firstNameInput = document.getElementById('first_name');
            const lastNameInput = document.getElementById('last_name');
            
            // Email validation
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(emailInput.value)) {
                document.getElementById('email-error').textContent = 'Please enter a valid email address';
                document.getElementById('email-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('email-error').style.display = 'none';
            }

            // First name validation
            if (firstNameInput.value.length < 2) {
                document.getElementById('first-name-error').textContent = 'Name must be at least 2 characters long';
                document.getElementById('first-name-error').style.display = 'block';
                isValid = false;
            } else if (!/^[A-Za-z]{2,}$/.test(firstNameInput.value)) {
                document.getElementById('first-name-error').textContent = 'Please enter a valid name (letters only)';
                document.getElementById('first-name-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('first-name-error').style.display = 'none';
            }

            // Last name validation
            if (lastNameInput.value.length < 2) {
                document.getElementById('last-name-error').textContent = 'Name must be at least 2 characters long';
                document.getElementById('last-name-error').style.display = 'block';
                isValid = false;
            } else if (!/^[A-Za-z]{2,}$/.test(lastNameInput.value)) {
                document.getElementById('last-name-error').textContent = 'Please enter a valid name (letters only)';
                document.getElementById('last-name-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('last-name-error').style.display = 'none';
            }

            return isValid;
        }

        // Clear error messages when typing
        ['email', 'first_name', 'last_name'].forEach(field => {
            document.getElementById(field).addEventListener('input', function() {
                document.getElementById(`${field.replace('_', '-')}-error`).style.display = 'none';
            });
        });

        // Phone validation for next step
        function validatePhone() {
            const phoneInput = document.getElementById('phone');
            const phoneError = document.getElementById('phone-error');
            const phoneRegex = /^\(\d{3}\) \d{3}-\d{4}$/;
            
            if (!phoneRegex.test(phoneInput.value)) {
                phoneError.textContent = 'Please enter a valid phone number';
                phoneError.style.display = 'block';
                return false;
            } else {
                phoneError.style.display = 'none';
                return true;
            }
        }

        // Signature validation
        document.getElementById('signature').addEventListener('input', function(e) {
            const firstName = document.getElementById('first_name').value;
            const lastName = document.getElementById('last_name').value;
            const fullName = `${firstName} ${lastName}`;
            const errorElement = document.getElementById('signature-error');
            
            if (this.value !== fullName && this.value.length > 0) {
                errorElement.textContent = 'Signature must match your first and last name exactly';
                errorElement.style.display = 'block';
                this.setCustomValidity('Names must match');
            } else {
                errorElement.style.display = 'none';
                this.setCustomValidity('');
            }
        });
    </script>

    <!-- Add Google Places API -->
    <script async
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initAutocomplete">
    </script>

    <!-- Add this just before the closing </body> tag -->
    <script>
    // Form submission handler with Dropbox integration
    document.getElementById('enrollmentForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Show loading state
        const submitButton = document.getElementById('submit-application');
        const originalButtonText = submitButton.textContent;
        submitButton.textContent = 'Submitting...';
        submitButton.disabled = true;

        try {
            // Validate reCAPTCHA
            const recaptchaResponse = grecaptcha.getResponse();
            if (!recaptchaResponse) {
                throw new Error('Please complete the reCAPTCHA');
            }

            // Get form data and create CSV
            const formData = new FormData(this);
            const csvContent = convertFormDataToCSV(formData);
            
            // Create filename with timestamp
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const filename = `enrollment_${timestamp}.csv`;

            // Log for debugging
            console.log('Uploading file:', filename);
            
            // Upload to Dropbox
            const response = await fetch('/api/upload-to-dropbox', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    filename: filename,
                    content: csvContent
                })
            });

            if (!response.ok) {
                throw new Error('Upload failed');
            }

            const result = await response.json();
            console.log('Upload successful:', result);

            // Redirect to signup page
            window.location.href = '/signup.html';

        } catch (error) {
            console.error('Submission error:', error);
            alert(error.message || 'There was an error submitting your enrollment. Please try again.');
            
            // Reset button state
            submitButton.textContent = originalButtonText;
            submitButton.disabled = false;
            
            // Reset reCAPTCHA
            grecaptcha.reset();
        }
    });

    // Helper function to convert form data to CSV
    function convertFormDataToCSV(formData) {
        // ... existing convertFormDataToCSV function ...
    }
    </script>

    <!-- Update reCAPTCHA integration -->
    <script src="https://www.google.com/recaptcha/api.js?render=explicit" async defer></script>

    <!-- Add this to the final step of your form -->
    <script>
    // Add this to the final step of your form
    document.getElementById('enrollmentForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const submitButton = document.getElementById('submit-application');
        const originalText = submitButton.textContent;
        
        try {
            // Disable button and show loading state
            submitButton.disabled = true;
            submitButton.textContent = 'Submitting...';

            // Get form data
            const formData = new FormData(this);
            
            // Create CSV content
            const csvContent = convertFormDataToCSV(formData);
            
            // Generate filename with timestamp
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const filename = `enrollment_${formData.get('first_name')}_${formData.get('last_name')}_${timestamp}.csv`;

            // Send to Dropbox
            const response = await fetch('/api/upload-to-dropbox', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    filename: filename,
                    content: csvContent
                })
            });

            if (!response.ok) {
                throw new Error('Failed to submit enrollment');
            }

            // Success! Redirect to signup page
            window.location.href = '/signup.html';

        } catch (error) {
            console.error('Submission error:', error);
            alert('There was an error submitting your enrollment. Please try again.');
            
            // Reset button state
            submitButton.disabled = false;
            submitButton.textContent = originalText;
        }
    });

    // Add this function to handle reCAPTCHA
    function onRecaptchaComplete(token) {
        const submitButton = document.getElementById('submit-application');
        submitButton.disabled = false;
        document.getElementById('recaptcha-error').style.display = 'none';
    }

    // Add this function to handle reCAPTCHA expiration
    function onRecaptchaExpired() {
        const submitButton = document.getElementById('submit-application');
        submitButton.disabled = true;
        document.getElementById('recaptcha-error').textContent = 'Please verify you are human again';
        document.getElementById('recaptcha-error').style.display = 'block';
    }

    // Add this function to handle reCAPTCHA errors
    function onRecaptchaError() {
        const submitButton = document.getElementById('submit-application');
        submitButton.disabled = true;
        document.getElementById('recaptcha-error').textContent = 'Error loading reCAPTCHA. Please refresh the page.';
        document.getElementById('recaptcha-error').style.display = 'block';
    }
    </script>
</body>
</html> 